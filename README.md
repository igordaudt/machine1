# machine1
curso machine learning dio microsoft azure

## parte 1 -  criar a maquina e inserir os dados
1. Criar Machine Learning no Portal Azure
<img width="387" alt="image" src="https://github.com/user-attachments/assets/31bd4422-c82b-456d-aafe-a0a89fa52e32" />

2. Criar
<img width="326" alt="image" src="https://github.com/user-attachments/assets/afb0fcde-43ee-43a7-b18d-122983b306ef" />

3. Preencher dados e criar:
<img width="385" alt="image" src="https://github.com/user-attachments/assets/276c52d7-97ad-4ee7-9188-e6af1fa34229" />

4. Aguardar criação:
![image](https://github.com/user-attachments/assets/832622f8-46bc-4ae1-89ba-bb060480c7ac)

5. Abrir recurso
<img width="201" alt="image" src="https://github.com/user-attachments/assets/49352d5d-2114-4137-96e2-f55d2fd2a298" />

6. Rodar
<img width="716" alt="image" src="https://github.com/user-attachments/assets/c48d7052-c2fc-4614-bc07-02e9fb39d255" />

7. Clicar em "ML Automatizado"
<img width="506" alt="image" src="https://github.com/user-attachments/assets/567c66af-97b8-411c-8aef-f8a13691b99f" />

8. Criar "Novo Trabalho de ML Automatizado"
<img width="487" alt="image" src="https://github.com/user-attachments/assets/891ec9d2-7690-4c78-abc0-c4dd21c730e0" />

9. Preencher configurações:
10. ![image](https://github.com/user-attachments/assets/1b8ff11e-bece-414b-a58c-c1f3db614687)

10. Clicar em "create" e preencher os dados do formulário:
<img width="593" alt="image" src="https://github.com/user-attachments/assets/52800e49-8249-4f42-b6b4-ba8b314e993a" />

11. Configurar fonte de dados e clique "Avançar"
<img width="739" alt="image" src="https://github.com/user-attachments/assets/4c241925-24f8-42a6-9b93-a73fda3333d5" />

12. Selecione o 'blob'
<img width="734" alt="image" src="https://github.com/user-attachments/assets/c95be4de-3ef5-42b6-a418-966dfa9e08a0" />

13. Baixe o arquivo de teste de https://aka.ms/bike-rentals, e extraia a pasta no seu computador.

14.Carregue a pasta contendo os 2 arquivos:
<img width="490" alt="image" src="https://github.com/user-attachments/assets/b77c6b0f-2d28-4908-8446-baad2a8c4a33" />

15. Clique em "criar"
<img width="422" alt="image" src="https://github.com/user-attachments/assets/7803432c-9fb0-4c6b-8a8b-64dabfda8e4e" />

16. Criado. Clique em "avançar"
<img width="629" alt="image" src="https://github.com/user-attachments/assets/55d38a64-6dfd-43d2-8f07-79361fefdad9" />

17. Selecione a coluna "rentals" como destino:
<img width="611" alt="image" src="https://github.com/user-attachments/assets/9ed611cb-eb0f-41d9-9192-e73cfda12c01" />

18. Clique em "Exibir definições adicionais" e configure conforme imagem:
<img width="836" alt="image" src="https://github.com/user-attachments/assets/b3a747c4-f5a9-41d2-b902-3a7d06228ca9" />

19. Configure os 'limites':
<img width="656" alt="image" src="https://github.com/user-attachments/assets/7d9c15e3-4557-439a-b56a-f0015f40a3e6" />

20. Configure 'validar e testar' e clique em "avançar"
<img width="365" alt="image" src="https://github.com/user-attachments/assets/92ef0b6e-ec32-455e-8b89-55664991884a" />

21. Mantenha Computação como padrão e clique em 'avançar":
<img width="620" alt="image" src="https://github.com/user-attachments/assets/6d436b28-2914-4a38-a976-b66cbf283f9f" />

22. Clique em "enviar trabalho"
<img width="528" alt="image" src="https://github.com/user-attachments/assets/21db447d-5821-4797-b8e7-41e48f25e4a4" />

23. Aguarde até o status ficar "concluído":
<img width="539" alt="image" src="https://github.com/user-attachments/assets/8a4fdb3d-c750-4e85-8cc5-701916504de0" />


## Parte 2 - Registar Modelo

1. Ir para "modelos", clicar em "registrar" e selecionar "de uma saída do trabalho":
<img width="677" alt="image" src="https://github.com/user-attachments/assets/b056677f-f511-4918-a0f5-dbd5930fd0b7" />

2. Role até o fim para selecionar o modelo criado e clique "avançar":
<img width="726" alt="image" src="https://github.com/user-attachments/assets/4ac10222-1d64-4f71-b8cc-1a3293b0dce3" />

3. Clique "Avançar":
<img width="493" alt="image" src="https://github.com/user-attachments/assets/8b2ebbb7-a87c-4665-a91f-ea0afbd2ef5b" />

4. Registre os dados e clique "avançar":
<img width="464" alt="image" src="https://github.com/user-attachments/assets/8ffc96db-216a-4149-9166-0c688d984764" />

5. Clique em "registro":
<img width="617" alt="image" src="https://github.com/user-attachments/assets/4d776e4d-9725-4ee8-9019-5faf1908c2dc" />

6. Voltar para "Jobs" para ver o resultado:
(Até descobrir como isso funcionava, acabei criando outros jobs).
<img width="491" alt="image" src="https://github.com/user-attachments/assets/dbc98586-2f47-46d0-bb0a-c7fc63c66cb8" />

7. Clique em "registered models" à direita:
<img width="466" alt="image" src="https://github.com/user-attachments/assets/a0051bb7-617c-46bc-b991-445db857010a" />

8. Clique em "versions" e clique no job listado
<img width="572" alt="image" src="https://github.com/user-attachments/assets/6c8fb847-7456-446b-bda0-961dbc169503" />

9. Clique em "metrics" para ver o resultado do trabalho.
<img width="554" alt="image" src="https://github.com/user-attachments/assets/b354b6b9-9662-497b-b27c-984152971e76" />

##3. Criando o Deploy
1. Volte para o "overview", clique em "deploy" -> "real-time endpoint"
<img width="670" alt="image" src="https://github.com/user-attachments/assets/38a057e7-2743-4c68-b013-228f25bf42e2" />

2. Selecione a VM "Standard E4S v3" e mantenha o resto padrão. Clique em "deploy":
<img width="308" alt="image" src="https://github.com/user-attachments/assets/47e70e62-5f5e-4e5f-a212-df2011ca7f13" />

3. O Deploy será executado. Aguarde o status de "Concluído"
<img width="568" alt="image" src="https://github.com/user-attachments/assets/94c953a3-4f18-4504-9118-254da9c5a316" />
Neste ponto, inicialmente não consegui rodar, e tive que alterar as configurações de registro na Azure:
Ir no portal da Azure: https://portal.azure.com/#home, fazer o login
Na barra de pesquisa, escrever "Subscription"
Selecionar o Subscription Name
Vai abrir um novo menu, então selecionar "Resource providers"
Selecionar:
->Microsoft.Cdn
->Microsoft.CostManagement
->Policy Insights
<img width="417" alt="image" src="https://github.com/user-attachments/assets/5f16a9ec-211d-4560-b188-04b12e3dda4f" />

Por causa da minha conta (startup patrocinada), tive que adicionar também os seguintes "roles", por orientação dos engenheiros da Microsoft (fiz atendimento para conseguir rodar o deploy):
-AzureML Compute Operator
-Reader
-Owner
-Contributor
Mais detalhes em: https://learn.microsoft.com/en-us/azure/machine-learning/how-to-assign-roles?view=azureml-api-2&tabs=team-lead

4. Testar o Endpoint:
Vá em "Endpoints" -> "Test"
<img width="665" alt="image" src="https://github.com/user-attachments/assets/b13ce3e2-6994-48d2-8c46-05a037b6a9ad" />

5. Copiar o JSON com o resultado e clicar em "teste"
Preencha os dados para teste conforme https://microsoftlearning.github.io/mslearn-ai-fundamentals/Instructions/Labs/01-machine-learning.html
<img width="327" alt="image" src="https://github.com/user-attachments/assets/c2e789e4-ac59-4602-8ea5-da8b6a651386" />

   {
  "input_data": {
    "columns": [
      "day",
      "mnth",
      "year",
      "season",
      "holiday",
      "weekday",
      "workingday",
      "weathersit",
      "temp",
      "atemp",
      "hum",
      "windspeed"
    ],
    "index": [0],
    "data": [[1,1,2022,2,0,1,1,2,0.3,0.3,0.3,0.3]]
  }
 }


6. Copie o resultado que aparece abaixo:
<img width="354" alt="image" src="https://github.com/user-attachments/assets/b6c10624-73bd-4435-8d36-00a473e560c6" />









